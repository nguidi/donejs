steal.has("mxui/util/scrollbar_width/scrollbar_width.js","mxui/layout/table_fill/table_fill.js","mxui/layout/table_scroll/table_scroll.js","steal/build/packages/test/table_scroll.js");steal({src:"steal/build/packages/test/packages/table_scroll.css",waits:!0,has:["steal/build/packages/test/table_scroll.css"]});
steal("jquery").then(function(a){var d=a('<div id="out"><div style="height:200px;"></div></div>').css({position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"100px",height:"100px",overflow:"hidden"}).appendTo(document.body),a=a(d[0].childNodes[0]),c=a[0].offsetWidth,b;d.css("overflow","scroll");b=a[0].offsetWidth;b==c&&(a.css("width","100%"),b=a[0].offsetWidth);d.remove();(window.Mxui||(window.Mxui={})).scrollbarWidth=c-b});steal.executed("mxui/util/scrollbar_width/scrollbar_width.js");
steal("mxui/layout/fill","mxui/util/scrollbar_width","jquery/controller").then(function(){$.Controller("Mxui.Layout.TableFill",{setup:function(a,d){a=$(a);"table"==a[0].nodeName.toLowerCase()?(this.$={table:a},this._super(this.$.table.wrap("<div></div>").parent(),d)):(this.$={table:a.find("table:first")},this._super(a,d))},init:function(){var a={};this.options.parent&&(a.parent=this.options.parent,a.filler=this.options.filler);this.element.mxui_layout_fill(a).css("overflow","auto")},resize:function(){var a=
this.$.table,d=this.element[0];a.css("width","");d.offsetHeight<d.scrollHeight?a.outerWidth(this.element.width()-Mxui.scrollbarWidth):a.outerWidth(this.element.width())}})});steal.executed("mxui/layout/table_fill/table_fill.js");
steal("mxui/layout/table_fill").then(function(a){var d=function(a,b){for(var d=a.length-1,e=0;e<d;e++)a.eq(e).outerWidth(b[e])};a.Controller("Mxui.Layout.TableScroll",{defaults:{filler:!0}},{setup:function(c,b){this.$={table:a(c)};this.$.scrollBody=this.$.table.wrap("<div><div  class='body'><div class='scrollBody'></div></div></div>").parent();this.$.body=this.$.scrollBody.parent();this._super(this.$.body.parent()[0],b)},init:function(){this.$.body.css("width","100%");a.each(["thead","tfoot"],this.callback("_wrapWithTable"));
this.$.tbody=this.$.table.children("tbody");this.$.tbody.length||(this.$.tbody=a("<tbody/>"),this.$.table.append(this.$.tbody));this.$.theadTable&&(this.$.head=a("<div class='header'></div>").css({visibility:"hidden",overflow:"hidden"}).prependTo(this.element).append(this.$.theadTable),this._addSpacer("thead"));this.$.tfootTable&&(this.$.foot=a("<div class='footer'></div>").css({visibility:"hidden",overflow:"hidden"}).appendTo(this.element).append(this.$.tfootTable),this._addSpacer("tfoot"));this.options.filler&&
this.$.scrollBody.mxui_layout_table_fill({parent:this.element.parent()});this.bind(this.$.scrollBody,"resize","bodyResized");this.bind(this.$.scrollBody,"scroll","bodyScroll");this._sizeHeaderAndFooters()},_wrapWithTable:function(a,b){this.$[b]=this.$.table.children(b);this.$[b].length&&this.$[b].find("td, th").length&&(this.$[b][0].parentNode.removeChild(this.$[b][0]),this.$[b+"Table"]=this.$.thead.wrap("<table/>").parent())},elements:function(){return{tbody:this.$.tbody,tfoot:this.$.tfoot,thead:this.$.thead,
scrollBody:this.$.scrollBody}},changed:function(a){this.$.foot&&this._addSpacer("tfoot");this.$.head&&this._addSpacer("thead");this._sizeHeaderAndFooters();!1!==a&&this.element.resize()},append:function(a,b){b?b.after(a):!1===b?this.$.tbody.prepend(a):this.$.spacer?this.$.spacer.before(a):this.$.tbody.append(a);this.changed(!0)},empty:function(){this.$.tbody.children(":not(.spacing)").remove();this.element.resize();return this},_addSpacer:function(c){if(this.$[c].is(":visible")){var b=this.$.tbody.children(".spacing."+
c);b.length&&b.remove();c=this.$[c].children(0).clone().addClass("spacing").addClass(c);c.children("th, td").each(function(){var b=a(this);b.html("<div style='float: left;'>"+b.html()+"</div>")});c.appendTo(this.$.tbody);c.children("th, td").each(function(){var b=a(this),c=b.children(":first"),d=c.outerWidth();b.css({"padding-top":0,"padding-bottom":0,margin:0,width:""});c.outerWidth(d+2).css({"float":"none",visibility:"hidden",height:"1px"}).html("")});this.$.spacer=c}},bodyResized:function(){this._sizeHeaderAndFooters()},
bodyScroll:function(a){this.$.head.scrollLeft(a.scrollLeft())},_sizeHeaderAndFooters:function(){var c=this.$.body,b=this.$.tbody.find("tr:first:not(.spacing)").children().map(function(){return a(this).outerWidth()}),c=this.$.table.height()>=c.height()?Mxui.scrollbarWidth:0,f=this.$.table.width();if(f){if(this.$.foot){var e=this.$.tfootTable.find("th, td");e.length==b.length&&d(e,b);this.$.foot.css("visibility","visible");this.$.tfootTable.width(f+c)}this.$.head&&(e=this.$.theadTable.find("th, td"),
e.length==b.length&&d(e,b),this.$.head.css("visibility","visible"),this.$.theadTable.width(f+c))}},destroy:function(){delete this.$;this._super()}})});steal.executed("mxui/layout/table_scroll/table_scroll.js");steal("mxui/layout/table_scroll","./table_scroll.css");steal.executed("steal/build/packages/test/table_scroll.js");
